import{s as re,n as Z,o as de}from"../chunks/scheduler.Y7QR3Ia1.js";import{S as ue,i as fe,e as m,c as b,a as E,d as v,b as a,f as $,s as L,t as F,h as Y,j as M,n as G,g as d,l as ee,o as W,m as te}from"../chunks/index.rNqrds2l.js";import{e as X}from"../chunks/each.6w4Ej4nR.js";import{c as le,b as J,Q as he}from"../chunks/appwrite.uMEoJwqV.js";import{D as q,C as z}from"../chunks/ids.oU3rm6Oc.js";const ve=({params:n})=>({classID:n.slug}),Ne=Object.freeze(Object.defineProperty({__proto__:null,load:ve},Symbol.toStringTag,{value:"Module"}));function se(n,e,l){const r=n.slice();return r[9]=e[l],r}function ae(n,e,l){const r=n.slice();return r[9]=e[l],r}function pe(n){let e,l,r='<a href="/dashboard/teacherDash"><button class="btn btn-error">Back</button></a>',g,i,h,A,j,D,y,T="Reset",f,c,p='<div class="flex flex-col gap-3 w-full"><div class="flex flex-row pb-2"><div class="flex-1 pl-2 flex flex-row gap-3"><h1 class="font-bold">Arrived</h1> <h1 class="font-bold">Received</h1> <h1 class="font-bold">Name</h1></div> <div class="flex flex-row gap-3 pr-4"><p class="font-bold">Sent</p></div></div></div>',P,N,V,B,w,_,U,C=X(n[1].filter(ne)),k=[];for(let t=0;t<C.length;t+=1)k[t]=ie(ae(n,C,t));let R=X(n[1].filter(oe)),x=[];for(let t=0;t<R.length;t+=1)x[t]=ce(se(n,R,t));return{c(){e=m("div"),l=m("div"),l.innerHTML=r,g=L(),i=m("div"),h=m("h1"),A=F(n[0]),j=L(),D=m("div"),y=m("button"),y.textContent=T,f=L(),c=m("div"),c.innerHTML=p,P=L(),N=m("div"),V=m("div");for(let t=0;t<k.length;t+=1)k[t].c();B=L(),w=m("div");for(let t=0;t<x.length;t+=1)x[t].c();this.h()},l(t){e=b(t,"DIV",{class:!0});var I=E(e);l=b(I,"DIV",{class:!0,"data-svelte-h":!0}),Y(l)!=="svelte-1eav9tx"&&(l.innerHTML=r),g=M(I),i=b(I,"DIV",{class:!0});var o=E(i);h=b(o,"H1",{class:!0});var s=E(h);A=G(s,n[0]),s.forEach(v),o.forEach(v),j=M(I),D=b(I,"DIV",{class:!0});var u=E(D);y=b(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(y)!=="svelte-gn108i"&&(y.textContent=T),u.forEach(v),I.forEach(v),f=M(t),c=b(t,"DIV",{class:!0,"data-svelte-h":!0}),Y(c)!=="svelte-2xwsk0"&&(c.innerHTML=p),P=M(t),N=b(t,"DIV",{class:!0});var S=E(N);V=b(S,"DIV",{class:!0});var O=E(V);for(let H=0;H<k.length;H+=1)k[H].l(O);O.forEach(v),B=M(S),w=b(S,"DIV",{class:!0});var Q=E(w);for(let H=0;H<x.length;H+=1)x[H].l(Q);Q.forEach(v),S.forEach(v),this.h()},h(){a(l,"class","flex justify-start items-start"),a(h,"class","text-3xl font-bold text-center"),a(i,"class","flex-1 justify-center items-center"),a(y,"class","btn btn-success"),a(D,"class","flex justify-end items-end"),a(e,"class","flex flex-row bg-base rounded-lg p-3"),a(c,"class","flex flex-col items-center justify-center"),a(V,"class","flex flex-col gap-1"),a(w,"class","flex flex-col gap-1"),a(N,"class","flex flex-col gap-1")},m(t,I){$(t,e,I),d(e,l),d(e,g),d(e,i),d(i,h),d(h,A),d(e,j),d(e,D),d(D,y),$(t,f,I),$(t,c,I),$(t,P,I),$(t,N,I),d(N,V);for(let o=0;o<k.length;o+=1)k[o]&&k[o].m(V,null);d(N,B),d(N,w);for(let o=0;o<x.length;o+=1)x[o]&&x[o].m(w,null);_||(U=ee(y,"click",n[3]),_=!0)},p(t,I){if(I&1&&W(A,t[0]),I&18){C=X(t[1].filter(ne));let o;for(o=0;o<C.length;o+=1){const s=ae(t,C,o);k[o]?k[o].p(s,I):(k[o]=ie(s),k[o].c(),k[o].m(V,null))}for(;o<k.length;o+=1)k[o].d(1);k.length=C.length}if(I&18){R=X(t[1].filter(oe));let o;for(o=0;o<R.length;o+=1){const s=se(t,R,o);x[o]?x[o].p(s,I):(x[o]=ce(s),x[o].c(),x[o].m(w,null))}for(;o<x.length;o+=1)x[o].d(1);x.length=R.length}},d(t){t&&(v(e),v(f),v(c),v(P),v(N)),te(k,t),te(x,t),_=!1,U()}}}function _e(n){let e,l='<span class="loading loading-spinner loading-lg mt-5"></span>';return{c(){e=m("div"),e.innerHTML=l,this.h()},l(r){e=b(r,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-ee12op"&&(e.innerHTML=l),this.h()},h(){a(e,"class","flex items-center justify-center pt-1")},m(r,g){$(r,e,g)},p:Z,d(r){r&&v(e)}}}function ie(n){let e,l,r,g,i,h,A,j,D,y,T=n[9].Name+"",f,c,p,P,N=n[9].parents.Name+"",V,B,w,_,U,C,k,R,x,t,I,o;return{c(){e=m("div"),l=m("div"),r=m("input"),i=L(),h=m("input"),j=L(),D=m("div"),y=m("h2"),f=F(T),c=L(),p=m("h3"),P=F("Parent: "),V=F(N),B=L(),w=m("div"),_=m("input"),x=L(),t=m("div"),this.h()},l(s){e=b(s,"DIV",{class:!0,id:!0});var u=E(e);l=b(u,"DIV",{class:!0});var S=E(l);r=b(S,"INPUT",{type:!0,class:!0}),i=M(S),h=b(S,"INPUT",{type:!0,class:!0}),j=M(S),D=b(S,"DIV",{class:!0});var O=E(D);y=b(O,"H2",{class:!0});var Q=E(y);f=G(Q,T),Q.forEach(v),c=M(O),p=b(O,"H3",{class:!0});var H=E(p);P=G(H,"Parent: "),V=G(H,N),H.forEach(v),O.forEach(v),S.forEach(v),B=M(u),w=b(u,"DIV",{});var K=E(w);_=b(K,"INPUT",{type:!0,id:!0,name:!0,class:!0}),K.forEach(v),u.forEach(v),x=M(s),t=b(s,"DIV",{class:!0}),E(t).forEach(v),this.h()},h(){a(r,"type","checkbox"),a(r,"class","checkbox checkbox-success rounded-full disabled:opacity-100 disabled:bg-transparent outline"),r.checked=g=n[9].Arrived,r.disabled=!0,a(h,"type","checkbox"),a(h,"class","checkbox checkbox-info rounded-full disabled:opacity-100 disabled:bg-transparent outline ml-8"),h.checked=A=n[9].Received,h.disabled=!0,a(y,"class","text-xl"),a(p,"class","text-sm"),a(D,"class","flex flex-col gap-1 pl-6"),a(l,"class","flex-1 flex flex-row gap-4"),a(_,"type","checkbox"),a(_,"id",U=n[9].Name),a(_,"name",C=n[9].Name),_.value=k=n[9].$id,_.checked=R=n[9].Sent,a(_,"class","checkbox checkbox-warning"),a(e,"class","flex flex-row pl-5 pr-5 pt-2"),a(e,"id","studentList"),a(t,"class","w-full h-0.5 bg-slate-500 opacity-25")},m(s,u){$(s,e,u),d(e,l),d(l,r),d(l,i),d(l,h),d(l,j),d(l,D),d(D,y),d(y,f),d(D,c),d(D,p),d(p,P),d(p,V),d(e,B),d(e,w),d(w,_),$(s,x,u),$(s,t,u),I||(o=ee(_,"change",n[4]),I=!0)},p(s,u){u&2&&g!==(g=s[9].Arrived)&&(r.checked=g),u&2&&A!==(A=s[9].Received)&&(h.checked=A),u&2&&T!==(T=s[9].Name+"")&&W(f,T),u&2&&N!==(N=s[9].parents.Name+"")&&W(V,N),u&2&&U!==(U=s[9].Name)&&a(_,"id",U),u&2&&C!==(C=s[9].Name)&&a(_,"name",C),u&2&&k!==(k=s[9].$id)&&(_.value=k),u&2&&R!==(R=s[9].Sent)&&(_.checked=R)},d(s){s&&(v(e),v(x),v(t)),I=!1,o()}}}function ce(n){let e,l,r,g,i,h,A,j,D,y,T=n[9].Name+"",f,c,p,P,N=n[9].parents.Name+"",V,B,w,_,U,C,k,R,x,t,I,o;return{c(){e=m("div"),l=m("div"),r=m("input"),i=L(),h=m("input"),j=L(),D=m("div"),y=m("h2"),f=F(T),c=L(),p=m("h3"),P=F("Parent: "),V=F(N),B=L(),w=m("div"),_=m("input"),x=L(),t=m("div"),this.h()},l(s){e=b(s,"DIV",{class:!0,id:!0});var u=E(e);l=b(u,"DIV",{class:!0});var S=E(l);r=b(S,"INPUT",{type:!0,class:!0}),i=M(S),h=b(S,"INPUT",{type:!0,class:!0}),j=M(S),D=b(S,"DIV",{class:!0});var O=E(D);y=b(O,"H2",{class:!0});var Q=E(y);f=G(Q,T),Q.forEach(v),c=M(O),p=b(O,"H3",{class:!0});var H=E(p);P=G(H,"Parent: "),V=G(H,N),H.forEach(v),O.forEach(v),S.forEach(v),B=M(u),w=b(u,"DIV",{});var K=E(w);_=b(K,"INPUT",{type:!0,id:!0,name:!0,class:!0}),K.forEach(v),u.forEach(v),x=M(s),t=b(s,"DIV",{class:!0}),E(t).forEach(v),this.h()},h(){a(r,"type","checkbox"),a(r,"class","checkbox checkbox-success rounded-full disabled:opacity-100 disabled:bg-transparent outline"),r.checked=g=n[9].Arrived,r.disabled=!0,a(h,"type","checkbox"),a(h,"class","checkbox checkbox-info rounded-full disabled:opacity-100 disabled:bg-transparent outline ml-8"),h.checked=A=n[9].Received,h.disabled=!0,a(y,"class","text-xl"),a(p,"class","text-sm"),a(D,"class","flex flex-col gap-1 pl-6"),a(l,"class","flex-1 flex flex-row gap-4"),a(_,"type","checkbox"),a(_,"id",U=n[9].Name),a(_,"name",C=n[9].Name),_.value=k=n[9].$id,_.checked=R=n[9].Sent,a(_,"class","checkbox checkbox-warning"),a(e,"class","flex flex-row pl-5 pr-5 pt-2"),a(e,"id","studentList"),a(t,"class","w-full h-0.5 bg-slate-500 opacity-25")},m(s,u){$(s,e,u),d(e,l),d(l,r),d(l,i),d(l,h),d(l,j),d(l,D),d(D,y),d(y,f),d(D,c),d(D,p),d(p,P),d(p,V),d(e,B),d(e,w),d(w,_),$(s,x,u),$(s,t,u),I||(o=ee(_,"change",n[4]),I=!0)},p(s,u){u&2&&g!==(g=s[9].Arrived)&&(r.checked=g),u&2&&A!==(A=s[9].Received)&&(h.checked=A),u&2&&T!==(T=s[9].Name+"")&&W(f,T),u&2&&N!==(N=s[9].parents.Name+"")&&W(V,N),u&2&&U!==(U=s[9].Name)&&a(_,"id",U),u&2&&C!==(C=s[9].Name)&&a(_,"name",C),u&2&&k!==(k=s[9].$id)&&(_.value=k),u&2&&R!==(R=s[9].Sent)&&(_.checked=R)},d(s){s&&(v(e),v(x),v(t)),I=!1,o()}}}function me(n){let e;function l(i,h){return i[2]?_e:pe}let r=l(n),g=r(n);return{c(){e=m("main"),g.c(),this.h()},l(i){e=b(i,"MAIN",{class:!0});var h=E(e);g.l(h),h.forEach(v),this.h()},h(){a(e,"class","overflow-y-scroll h-[80vh] text-white")},m(i,h){$(i,e,h),g.m(e,null)},p(i,[h]){r===(r=l(i))&&g?g.p(i,h):(g.d(1),g=r(i),g&&(g.c(),g.m(e,null)))},i:Z,o:Z,d(i){i&&v(e),g.d()}}}const ne=n=>n.Arrived,oe=n=>!n.Arrived;function be(n,e,l){let{data:r}=e,g="",i=[],h=!0;async function A(){await J.getDocument(q,z.Class,r.classID).then(f=>{l(1,i=f.students),i.forEach(async c=>{await J.updateDocument(q,z.Students,c.$id,{Arrived:!1,Sent:!1,Received:!1}).then(p=>{}).catch(p=>{console.log(p)})})}).catch(f=>{console.log(f)}),i.forEach(async f=>{await J.listDocuments(q,z.Parents,[he.limit(200)]).then(c=>{c.documents.filter(P=>P.$id==f.parents.$id).forEach(async P=>{await J.updateDocument(q,z.Parents,P.$id,{Arrived:!1}).then(N=>{console.log(N)}).catch(N=>{console.log(N)})})}).catch(c=>{console.log(c)})})}async function j(){await J.getDocument(q,z.Class,r.classID).then(f=>{l(1,i=f.students),l(0,g=f.Name),console.log(i),l(2,h=!1)}).catch(f=>{console.log(f)})}j();const D=le.subscribe(["databases."+q+".collections."+z.Students+".documents"],f=>{console.log(f);const c=f.payload;c.Arrived!==void 0&&(i.find(p=>p.$id==c.$id).Arrived=c.Arrived),c.Received!==void 0&&(i.find(p=>p.$id==c.$id).Received=c.Received),c.Sent!==void 0&&(i.find(p=>p.$id==c.$id).Sent=c.Sent),l(1,i=[...i]),console.log(i)}),y=le.subscribe(["databases."+q+".collections."+z.Parents+".documents"],f=>{console.log(f);const c=f.payload;c.Arrived!==void 0&&(i.find(p=>p.parents.$id==c.$id).parents.Arrived=c.Arrived),c.Received!==void 0&&(i.find(p=>p.$id==c.$id).Received=c.Received),c.Sent!==void 0&&(i.find(p=>p.$id==c.$id).Sent=c.Sent),l(1,i=[...i]),console.log(i)});de(()=>()=>{y(),D()});async function T(f){await J.updateDocument(q,z.Students,f.target.value,{Sent:f.target.checked}).then(c=>{}).catch(c=>{console.log(c)})}return n.$$set=f=>{"data"in f&&l(5,r=f.data)},[g,i,h,A,T,r]}class ye extends ue{constructor(e){super(),fe(this,e,be,me,re,{data:5})}}export{ye as component,Ne as universal};
